import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,o as e,d as a}from"./app-DuswJAHG.js";const i="/vuepress/assets/2023-10-28_202550_3444380.8152204291998528-DoniJf3q.png",d="/vuepress/assets/2023-10-28_202550_4860940.4338630451242931-CKJWBAFF.png",p="/vuepress/assets/2023-10-28_202550_7180570.6726335216057656-DEMAOImG.png",l={},t=a(`<h1 id="一、环境" tabindex="-1"><a class="header-anchor" href="#一、环境"><span>一、环境</span></a></h1><table id="19bb82e9" class="ne-table" style="table-layout:fixed;border-collapse:collapse;border:1px solid #d9d9d9;width:748px;"><tbody><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="u3968485a" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">主机名</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u68cf88c2" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">IP地址</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ucc8361a9" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">系统</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="uaff782a0" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">说明</span></p></td></tr><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="u53689aa9" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">localhost</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="uedc91845" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">192.168.11.60</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ue2e6c74f" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">Ubuntu 20.04</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u9011cbe2" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">docker 安装的prometheus</span></p></td></tr><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u0ecaa170" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">192.168.11.45</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u84e7d34e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">Gns3模拟器</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u8a801bcf" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">思科c3640</span></p></td></tr><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ueed9ee1f" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">192.168.11.46</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ua0167b9f" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">华为ensp模拟器</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u15280ac8" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">华为s5700</span></p></td></tr></tbody></table><h2 id="_1、环境准备" tabindex="-1"><a class="header-anchor" href="#_1、环境准备"><span>1、环境准备</span></a></h2><h3 id="a、docker安装prometheus" tabindex="-1"><a class="header-anchor" href="#a、docker安装prometheus"><span>a、docker安装prometheus</span></a></h3><p>安装docker（略）</p><p>安装docker-compose(略)</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /data/</span></span>
<span class="line"><span>cd /data</span></span>
<span class="line"><span>git clone https://gitee.com/linge365/docker-prometheus.git</span></span>
<span class="line"><span>docker-compose up -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="b、下载模拟器" tabindex="-1"><a class="header-anchor" href="#b、下载模拟器"><span>b、下载模拟器</span></a></h3><p>思科模拟器</p><p><a href="https://gns3.com/software/download" target="_blank" rel="noopener noreferrer">下载地址</a></p><p>华为ensp模拟器</p><p><a href="https://www.aliyundrive.com/s/uA7zs4ZoHkR" target="_blank" rel="noopener noreferrer">下载地址</a></p><p>提取密码：0i1y</p><h3 id="c、获取mibs文件" tabindex="-1"><a class="header-anchor" href="#c、获取mibs文件"><span>c、获取mibs文件</span></a></h3><ul><li>如果不生成snmp.yaml文件，这步略过</li></ul><p>华为官网获取mibs文件：</p><p><a href="https://support.huawei.com/mibtoolweb/enterpriseMibInfo/zh" target="_blank" rel="noopener noreferrer">https://support.huawei.com/mibtoolweb/enterpriseMibInfo/zh</a></p><p>第三方github仓库下载mibs文件</p><p><a href="https://github.com/netdisco/netdisco-mibs" target="_blank" rel="noopener noreferrer">https://github.com/netdisco/netdisco-mibs</a></p><p><a href="https://github.com/pgmillon/observium/tree/master/mibs" target="_blank" rel="noopener noreferrer">https://github.com/pgmillon/observium/tree/master/mibs</a></p><p><a href="https://github.com/librenms/librenms/tree/master/mibs" target="_blank" rel="noopener noreferrer">https://github.com/librenms/librenms/tree/master/mibs</a></p><h1 id="二、监控交换机" tabindex="-1"><a class="header-anchor" href="#二、监控交换机"><span>二、监控交换机</span></a></h1><h2 id="_1、交换机上启用和配置-snmp-服务" tabindex="-1"><a class="header-anchor" href="#_1、交换机上启用和配置-snmp-服务"><span>1、交换机上启用和配置 SNMP 服务</span></a></h2><p>a、通过telnet登录交换机或者去机房插console线</p><p>b、华为交换机开启和配置snmp</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;Huawei&gt;　sys #进入配置模式</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Huawei] snmp-agent community read public #配置交换机的读团体名为“public”</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Huawei] snmp-agent sys-info version all #配置SNMP版本 （all是所有版本）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Huawei] snmp-agent trap enable #启用snmp陷阱，输入Y</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>c、思科交换机开启snmp</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SW&gt; enable #切换到特权模式</span></span>
<span class="line"><span>SW# show version </span></span>
<span class="line"><span>SW# conf t        #进入全局配置模式</span></span>
<span class="line"><span>SW(config)# snmp-server community public ro #打开交换机snmp服务，设置团体名称为public，只读</span></span>
<span class="line"><span>SW(config)# snmp-server enable traps snmp #启用snmp陷阱</span></span>
<span class="line"><span>SW(config)# exit</span></span>
<span class="line"><span>SW# show snmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>d、prometheus服务器上检查</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt-get install snmp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#返回交换机所有接口</span></span>
<span class="line"><span>snmpwalk -v2c -c public 192.168.11.45 1.3.6.1.2.1.31.1.1.1.1</span></span>
<span class="line"><span>snmpwalk -v2c -c public 192.168.11.46 1.3.6.1.2.1.31.1.1.1.1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有数据返回表示正常</p><h2 id="_2、生成基础snmp-yml文件" tabindex="-1"><a class="header-anchor" href="#_2、生成基础snmp-yml文件"><span>2、生成基础snmp.yml文件</span></a></h2><p>snmp_exporter的配置文件snmp.yml需要自己通过Generator 项目编译生成</p><p><a href="https://github.com/prometheus/snmp_exporter/tree/main/generator" target="_blank" rel="noopener noreferrer">官网-generator</a></p><h3 id="编译安装generator-二选一" tabindex="-1"><a class="header-anchor" href="#编译安装generator-二选一"><span>编译安装generator（二选一）</span></a></h3><p>二进制安装golang（需要编译Generator 需要golang）</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>#下载</span></span>
<span class="line"><span>wget https://studygolang.com/dl/golang/go1.19.7.linux-amd64.tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#解压</span></span>
<span class="line"><span>tar -xf go1.19.7.linux-amd64.tar.gz -C /opt</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#创建环境变量配置</span></span>
<span class="line"><span>cat &gt;&gt; /etc/profile &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span>export PATH=$PATH:/opt/go/bin</span></span>
<span class="line"><span>export GO111MODULE=on</span></span>
<span class="line"><span>export GOPROXY=https://goproxy.cn</span></span>
<span class="line"><span>EOF</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#使配置生效</span></span>
<span class="line"><span>source /etc/profile</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看go版本</span></span>
<span class="line"><span>go version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编译安装generator</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /opt/generator</span></span>
<span class="line"><span>cd /opt/generator</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo apt-get install unzip build-essential libsnmp-dev # Debian-based distros</span></span>
<span class="line"><span></span></span>
<span class="line"><span>git clone https://github.com/prometheus/snmp_exporter.git</span></span>
<span class="line"><span>cd snmp_exporter/generator</span></span>
<span class="line"><span>make generator</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#检查</span></span>
<span class="line"><span>ls -l generator</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建generator.yml文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt;generator.yml&lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>modules:</span></span>
<span class="line"><span>  huawei_mib:   #mib名称根据实际修改，要和prometheus的配置一致</span></span>
<span class="line"><span>    walk:       #遍历OID列表，也可以是SNMP对象名称或特定实例</span></span>
<span class="line"><span>      - sysUpTime</span></span>
<span class="line"><span>      - interfaces</span></span>
<span class="line"><span>      - ifXTable</span></span>
<span class="line"><span>      - sysDescr</span></span>
<span class="line"><span>      - sysName</span></span>
<span class="line"><span>    version: 2 #snmp版本，需要看交换机开启了那个版本，华为交换机一般都是开启2c，如果是3的版本需要添加认证</span></span>
<span class="line"><span>    auth:</span></span>
<span class="line"><span>      community: public   #团体字，根据实际修改。</span></span>
<span class="line"><span>    lookups:</span></span>
<span class="line"><span>      - source_indexes: [ifIndex] </span></span>
<span class="line"><span>        lookup: ifAlias               # ifAlias	表示网络设备接口的别名</span></span>
<span class="line"><span>      - source_indexes: [ifIndex] </span></span>
<span class="line"><span>        lookup: 1.3.6.1.2.1.2.2.1.2   # ifDescr	表示网络设备接口的描述</span></span>
<span class="line"><span>      - source_indexes: [ifIndex]</span></span>
<span class="line"><span>        lookup: 1.3.6.1.2.1.31.1.1.1.1 # ifName	表示网络设备接口的名称</span></span>
<span class="line"><span>    overrides:</span></span>
<span class="line"><span>      ifAlias:</span></span>
<span class="line"><span>        ignore: true # Lookup metric</span></span>
<span class="line"><span>      ifDescr:</span></span>
<span class="line"><span>        ignore: true # Lookup metric</span></span>
<span class="line"><span>      ifName:</span></span>
<span class="line"><span>        ignore: true # Lookup metric</span></span>
<span class="line"><span>      ifType:</span></span>
<span class="line"><span>        type: EnumAsInfo</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下载mibs文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>wget https://github.com/librenms/librenms/archive/refs/heads/master.zip </span></span>
<span class="line"><span></span></span>
<span class="line"><span>unzip master.zip</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mv librenms-master/mibs .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>生成snmp.yml文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>export MIBDIRS=mibs   #指定mibs文件夹在当前目录</span></span>
<span class="line"><span>./generator generate  #生成snmp.yml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker安装generator-和编译安装二选一" tabindex="-1"><a class="header-anchor" href="#docker安装generator-和编译安装二选一"><span>docker安装generator（和编译安装二选一）</span></a></h3><p>创建generator.yml文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /opt/generator</span></span>
<span class="line"><span>cd /opt/generator</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cat &gt;generator.yml&lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>modules:</span></span>
<span class="line"><span>  huawei_mib:   #mib名称根据实际修改，要和prometheus的配置一致</span></span>
<span class="line"><span>    walk:       #遍历OID列表，也可以是SNMP对象名称或特定实例</span></span>
<span class="line"><span>      - sysUpTime</span></span>
<span class="line"><span>      - interfaces</span></span>
<span class="line"><span>      - ifXTable</span></span>
<span class="line"><span>      - sysDescr</span></span>
<span class="line"><span>      - sysName</span></span>
<span class="line"><span>    version: 2 #snmp版本，需要看交换机开启了那个版本，华为交换机一般都是开启2c，如果是3的版本需要添加认证</span></span>
<span class="line"><span>    auth:</span></span>
<span class="line"><span>      community: public   #团体字，根据实际修改。</span></span>
<span class="line"><span>    lookups:</span></span>
<span class="line"><span>      - source_indexes: [ifIndex] </span></span>
<span class="line"><span>        lookup: ifAlias               # ifAlias	表示网络设备接口的别名</span></span>
<span class="line"><span>      - source_indexes: [ifIndex] </span></span>
<span class="line"><span>        lookup: 1.3.6.1.2.1.2.2.1.2   # ifDescr	表示网络设备接口的描述</span></span>
<span class="line"><span>      - source_indexes: [ifIndex]</span></span>
<span class="line"><span>        lookup: 1.3.6.1.2.1.31.1.1.1.1 # ifName	表示网络设备接口的名称</span></span>
<span class="line"><span>    overrides:</span></span>
<span class="line"><span>      ifAlias:</span></span>
<span class="line"><span>        ignore: true # Lookup metric</span></span>
<span class="line"><span>      ifDescr:</span></span>
<span class="line"><span>        ignore: true # Lookup metric</span></span>
<span class="line"><span>      ifName:</span></span>
<span class="line"><span>        ignore: true # Lookup metric</span></span>
<span class="line"><span>      ifType:</span></span>
<span class="line"><span>        type: EnumAsInfo</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置解释:</p><ul><li><p>模块名称 huawei_mib 通过名字可以知道是作用华为设备</p></li><li><p>walk 中, 是需要获取的指标. 其中前6个是共有mib获取到的,后面是私有mib获取到的.</p></li><li><p>version snmp协议是v2</p></li><li><p>auth 定义的团体名</p></li><li><p>looksups 通过索引查找列表</p></li><li><p>overrides 前三个指标删除,后面几项是定义了他们的数据类型.</p></li></ul><p>下载mibs文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt/generator</span></span>
<span class="line"><span></span></span>
<span class="line"><span>wget https://github.com/librenms/librenms/archive/refs/heads/master.zip</span></span>
<span class="line"><span></span></span>
<span class="line"><span>unzip master.zip</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mv librenms-master/mibs/ .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker运行generator生成snmp.yml文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker run --rm -v &quot;\${PWD}:/opt/&quot; prom/snmp-generator generate</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#会在当前目录下生成snmp.yml文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、生成监控cpu-内存的snmp-yml文件" tabindex="-1"><a class="header-anchor" href="#_3、生成监控cpu-内存的snmp-yml文件"><span>3、生成监控cpu,内存的snmp.yml文件</span></a></h2><h3 id="获取oid" tabindex="-1"><a class="header-anchor" href="#获取oid"><span>获取oid</span></a></h3><p>华为官网获取</p><p><a href="https://support.huawei.com/mibtoolweb/enterpriseMibInfo/zh" target="_blank" rel="noopener noreferrer">https://support.huawei.com/mibtoolweb/enterpriseMibInfo/zh</a></p><h3 id="创建generator-yml文件" tabindex="-1"><a class="header-anchor" href="#创建generator-yml文件"><span>创建generator.yml文件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt;generator.yml&lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>modules:</span></span>
<span class="line"><span>  huawei_mib:</span></span>
<span class="line"><span>    walk:</span></span>
<span class="line"><span>      - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.5  #huawei CPU使用率，取值范围：2～100。hwEntityCpuUsage</span></span>
<span class="line"><span>      - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.7  #huawei 内存使用率。hwEntityMemUsage</span></span>
<span class="line"><span>      - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.11 #huawei 交换机温度。 hwEntityTemperature</span></span>
<span class="line"><span>      - 1.3.6.1.4.1.2011.5.25.31.1.1.10.1.7 #huawei 风扇运行。 hwEntityFanState</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker运行generator" tabindex="-1"><a class="header-anchor" href="#docker运行generator"><span>docker运行generator</span></a></h3><p>来生成snmp.yml文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mv mibs/huawei/* mibs/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>docker run --rm -v &quot;\${PWD}:/opt/&quot; prom/snmp-generator generate</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#会在当前目录下生成snmp.yml文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>会得到只有cpu、内存、风扇的snmp.yaml文件，如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>huawei_mib:</span></span>
<span class="line"><span>  walk:</span></span>
<span class="line"><span>  - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.11</span></span>
<span class="line"><span>  - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.5</span></span>
<span class="line"><span>  - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.7</span></span>
<span class="line"><span>  - 1.3.6.1.4.1.2011.5.25.31.1.1.10.1.7</span></span>
<span class="line"><span>  metrics:</span></span>
<span class="line"><span>  - name: hwEntityTemperature</span></span>
<span class="line"><span>    oid: 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.11</span></span>
<span class="line"><span>    type: gauge</span></span>
<span class="line"><span>    help: The temperature for the entity - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.11</span></span>
<span class="line"><span>    indexes:</span></span>
<span class="line"><span>    - labelname: entPhysicalIndex</span></span>
<span class="line"><span>      type: gauge</span></span>
<span class="line"><span>  - name: hwEntityCpuUsage</span></span>
<span class="line"><span>    oid: 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.5</span></span>
<span class="line"><span>    type: gauge</span></span>
<span class="line"><span>    help: The CPU usage for this entity - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.5</span></span>
<span class="line"><span>    indexes:</span></span>
<span class="line"><span>    - labelname: entPhysicalIndex</span></span>
<span class="line"><span>      type: gauge</span></span>
<span class="line"><span>  - name: hwEntityMemUsage</span></span>
<span class="line"><span>    oid: 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.7</span></span>
<span class="line"><span>    type: gauge</span></span>
<span class="line"><span>    help: The memory usage for the entity - 1.3.6.1.4.1.2011.5.25.31.1.1.1.1.7</span></span>
<span class="line"><span>    indexes:</span></span>
<span class="line"><span>    - labelname: entPhysicalIndex</span></span>
<span class="line"><span>      type: gauge</span></span>
<span class="line"><span>  - name: hwEntityFanState</span></span>
<span class="line"><span>    oid: 1.3.6.1.4.1.2011.5.25.31.1.1.10.1.7</span></span>
<span class="line"><span>    type: gauge</span></span>
<span class="line"><span>    help: This object indicates the state of the fan. - 1.3.6.1.4.1.2011.5.25.31.1.1.10.1.7</span></span>
<span class="line"><span>    indexes:</span></span>
<span class="line"><span>    - labelname: hwEntityFanSlot</span></span>
<span class="line"><span>      type: gauge</span></span>
<span class="line"><span>    - labelname: hwEntityFanSn</span></span>
<span class="line"><span>      type: gauge</span></span>
<span class="line"><span>    enum_values:</span></span>
<span class="line"><span>      1: normal</span></span>
<span class="line"><span>      2: abnormal</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="和基础snmp-yaml合并" tabindex="-1"><a class="header-anchor" href="#和基础snmp-yaml合并"><span>和基础snmp.yaml合并</span></a></h3><p>把合并好的snmp.yml文件，给snmp_exporter做配置文件。（完成）</p><h2 id="_4、二进制安装snmp-exporter-二选一" tabindex="-1"><a class="header-anchor" href="#_4、二进制安装snmp-exporter-二选一"><span>4、二进制安装snmp_exporter（二选一）</span></a></h2><p><a href="https://github.com/prometheus/snmp_exporter/releases/" target="_blank" rel="noopener noreferrer">https://github.com/prometheus/snmp_exporter/releases/</a></p><h3 id="安装snmp-exporter" tabindex="-1"><a class="header-anchor" href="#安装snmp-exporter"><span>安装snmp_exporter</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>wget https://github.com/prometheus/snmp_exporter/releases/download/v0.20.0/snmp_exporter-0.20.0.linux-amd64.tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>tar xf snmp_exporter-0.20.0.linux-amd64.tar.gz</span></span>
<span class="line"><span>mv snmp_exporter-0.20.0.linux-amd64 /opt/snmp_exporter</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#备份原配置</span></span>
<span class="line"><span>cp /opt/snmp_exporter/snmp.yml{,.bak}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#把通过grenerator生成的snmp.yml配置移动到/opt/snmp_exporter/下面</span></span>
<span class="line"><span>mv snmp.yml /opt/snmp_exporter/snmp.yml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建用户" tabindex="-1"><a class="header-anchor" href="#创建用户"><span>创建用户</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>useradd -M -s /usr/sbin/nologin prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="更改exporter文件夹权限" tabindex="-1"><a class="header-anchor" href="#更改exporter文件夹权限"><span>更改exporter文件夹权限</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>chown prometheus:prometheus -R /opt/snmp_exporter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="创建systemd" tabindex="-1"><a class="header-anchor" href="#创建systemd"><span>创建systemd</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt; /etc/systemd/system/snmp_exporter.service &lt;&lt; &quot;EOF&quot;</span></span>
<span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Prometheus SNMP Exporter</span></span>
<span class="line"><span>After=network-online.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=simple</span></span>
<span class="line"><span>User=prometheus</span></span>
<span class="line"><span>Group=prometheus</span></span>
<span class="line"><span>Type=simple</span></span>
<span class="line"><span>ExecStart=/opt/snmp_exporter/snmp_exporter --config.file /opt/snmp_exporter/snmp.yml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl daemon-reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl start snmp_exporter.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="加入到开机自启动" tabindex="-1"><a class="header-anchor" href="#加入到开机自启动"><span>加入到开机自启动</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl enable snmp_exporter.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="检查" tabindex="-1"><a class="header-anchor" href="#检查"><span>检查</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl status snmp_exporter.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动不了检查日志</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>journalctl -u snmp_exporter -f</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_5、docker安装snmp-exporter-二选一" tabindex="-1"><a class="header-anchor" href="#_5、docker安装snmp-exporter-二选一"><span>5、docker安装snmp_exporter（二选一）</span></a></h2><p>使用现有的snmp.yml文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>#拉取已经写好的docker-compose.yaml文件</span></span>
<span class="line"><span>git clone https://gitee.com/linge365/docker-compose.git</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cd docker-compose/snmp_exporter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker-compose up -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_6、添加prometheus配置" tabindex="-1"><a class="header-anchor" href="#_6、添加prometheus配置"><span>6、添加prometheus配置</span></a></h2><p>prometheus配置如下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>  - job_name: &#39;snmp&#39;</span></span>
<span class="line"><span>    scrape_timeout: 30s   # 采集超时10s</span></span>
<span class="line"><span>    scrape_interval: 1m   # 采集频率1m</span></span>
<span class="line"><span>    static_configs:</span></span>
<span class="line"><span>      - targets:</span></span>
<span class="line"><span>        - 192.168.11.45  #交换机ip，根据实际修改</span></span>
<span class="line"><span>        - 192.168.11.46  #交换机ip，根据实际修改</span></span>
<span class="line"><span>    metrics_path: /snmp</span></span>
<span class="line"><span>    params:</span></span>
<span class="line"><span>      module: [if_mib]  #mib名称根据实际修改</span></span>
<span class="line"><span>    relabel_configs:</span></span>
<span class="line"><span>      - source_labels: [__address__]</span></span>
<span class="line"><span>        target_label: __param_target</span></span>
<span class="line"><span>      - source_labels: [__param_target]</span></span>
<span class="line"><span>        target_label: instance</span></span>
<span class="line"><span>      - target_label: __address__</span></span>
<span class="line"><span>        replacement: 192.168.11.60:9116</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>snmp.yml中的模块名要和prometheus配置的要一致：如下图：</p><figure><img src="`+i+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>重载prometheus</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl -X POST http://localhost:9090/-/reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="web检查" tabindex="-1"><a class="header-anchor" href="#web检查"><span>web检查</span></a></h3><p>没有问题</p><figure><img src="'+d+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_7、snmp的监控指标" tabindex="-1"><a class="header-anchor" href="#_7、snmp的监控指标"><span>7、SNMP的监控指标</span></a></h2><table id="1b16c0f3" class="ne-table" style="table-layout:fixed;border-collapse:collapse;border:1px solid #d9d9d9;width:750px;"><tbody><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u8b104bac" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">指标名称</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u64136adc" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">指标描述</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u2475d2d9" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">OID</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="ub7f17444" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">sysDescr</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ucebfb2d3" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">系统版本描述</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u75966893" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.1.1</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u2f37a343" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">sysUpTime</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u3eec5972" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">启动时间</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uf435ebd8" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.1.3</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u0ff81735" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">sysName</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u78dd2518" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">交换机系统名</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ub2df603c" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.1.5</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u8072a7d5" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifIndex</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uec750619" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口序号</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u4d015d67" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.1</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u861da804" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifName</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u23902d79" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口名</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="udbd4fb45" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.1</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uc8175722" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifAdminStatus</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u7d2af26a" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口状态</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uc3a8905c" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.7</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u75c95866" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCOutOctets</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uce113b87" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口发出的字节数总计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u054fe22e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.10</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u0d2d4545" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCInOctets</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ub5f46110" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口收到的字节数总计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uf0b0c8e8" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.6</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u5073005f" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInBroadcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u9c23f908" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口收到的广播包数量统计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u744cd5a9" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.3</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u1740b57b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInErrors</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u2f57a590" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">流入流量异常数统计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="udaef568d" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.14</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uac9ad640" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifSpeed</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uc2df92ab" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口当前带宽[bps]</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u152221af" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.5</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u18da0afa" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifMtu</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u75a0f743" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">MTU配置值</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u436c5463" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.4</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uaf289430" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutDiscards</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u32a5f202" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">出方向流量丢包总计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u49ee38d7" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.19</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u8246f109" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHighSpeed</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u6cad99fe" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口背板带宽，单位为M bits per second</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u36c66965" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.15</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uc71e9ab1" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInDiscards</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u4851c3ea" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口流入流量丢包数总计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ub160a971" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.13</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u80e1a3b1" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInMulticastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ufcb32e92" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口收到的多播包统计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u69cd6287" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.2</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="udf01a116" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInUnknownProtos</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u56c30dc6" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口收到的未知协议包数总计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="udb933983" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.15</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u7b09d1d8" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutMulticastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u5e98f172" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">发出多播包统计</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uad653816" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.4</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="ubdb7d86e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifCounterDiscontinuityTime</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u01b0dbd7" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.19</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u29b162ee" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifConnectorPresent</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u028a5898" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.17</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u154987fd" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifPromiscuousMode</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u41490757" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.16</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="ucfd1ff67" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifLinkUpDownTrapEnable</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u0778c35b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.14</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u8049f38c" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCOutBroadcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ue2692cf2" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.13</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u249030a2" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCOutMulticastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u94e1a073" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.12</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="ud0a6caf5" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCOutUcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u71529096" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.11</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="ud04010e9" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCInBroadcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u51cc31f7" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.9</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u70c9e75a" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCInMulticastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ub8d5d514" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.8</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u44891733" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifHCInUcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u54336d44" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.7</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u04c704c5" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutBroadcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ud6b487aa" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.31.1.1.1.5</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u38f534e8" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifSpecific</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u8ff0a273" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.22</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uef00b161" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutQLen</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ud7c33ab5" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.21</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uf10e7a36" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutErrors</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uf800c2c5" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.20</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uf1c4a436" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutNUcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uf4bf5f1a" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.18</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u013c48d4" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInNUcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u9888a41d" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.12</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="ua8170729" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifLastChange</span></p></td><td width="250" style="border:1px solid #d9d9d9;"></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ud2e53f81" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.9</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u4c1a74ff" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">IfNumber</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u164d88ab" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">网络接口的数目</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u2178f89b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.1</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u07f16ecc" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifDescr</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u647709ec" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">网络接口信息描述</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uaef885d1" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.2</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u6b9d382c" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifType</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u9eb72770" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">网络接口类型</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u41f2b508" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.3</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u283a029b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifPhysAddress</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ua2a6f921" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口的物理地址</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u42c75c3f" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.6</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u557c8d4b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOperStatus</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uae0ea750" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口当前操作状态[up/down]</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u0981a3ae" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.8</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="ucbd43cf4" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInOctets</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="uf5e4f1b5" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口收到的字节数</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u1c0feaeb" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.10</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u1fb23624" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutOctets</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u26a6fc4a" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口发送的字节数</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u51ead8fa" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.16</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="u4fcfb9fc" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifInUcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="ufeb7b678" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口收到的数据包个数</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u7c5ebd9e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.11</span></p></td></tr><tr style="height:33px;"><td width="250" style="border:1px solid #d9d9d9;"><p id="uc0285f1b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">ifOutUcastPkts</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u6cfe4969" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">接口发送的数据包个数</span></p></td><td width="250" style="border:1px solid #d9d9d9;"><p id="u798e8122" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">1.3.6.1.2.1.2.2.1.17</span></p></td></tr></tbody></table><h2 id="_8、配置告警规则" tabindex="-1"><a class="header-anchor" href="#_8、配置告警规则"><span>8、配置告警规则</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>ifHCOutOctets  接口发出的字节数总计。上行</span></span>
<span class="line"><span>ifHCInOctets   接口收到的字节数总计，下行</span></span>
<span class="line"><span>ifOperStatus   接口状态</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用cat创建告警规则</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cd /data/docker-prometheus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cat &gt;&gt; prometheus/rules/snmp.yml &lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>groups:</span></span>
<span class="line"><span>- name: snmp</span></span>
<span class="line"><span>  rules:</span></span>
<span class="line"><span>  - alert: ifHCOut</span></span>
<span class="line"><span>    expr: sum by (instance) (rate(ifHCOutOctets[2m])) / 1024 / 1024 &gt; 100</span></span>
<span class="line"><span>    for: 5m</span></span>
<span class="line"><span>    labels:</span></span>
<span class="line"><span>      severity: warning</span></span>
<span class="line"><span>    annotations:</span></span>
<span class="line"><span>      summary: &quot;交换机异常流入网络吞吐量,实例:{{ $labels.instance }}&quot;</span></span>
<span class="line"><span>      description: &quot;交换机网络流入流量 &gt; 100 MB/s，当前值：{{ $value }}&quot;</span></span>
<span class="line"><span>  - alert: ifHCIn</span></span>
<span class="line"><span>    expr: sum by (instance) (rate(ifHCInOctets[2m])) / 1024 / 1024 &gt; 100</span></span>
<span class="line"><span>    for: 5m</span></span>
<span class="line"><span>    labels:</span></span>
<span class="line"><span>      severity: warning</span></span>
<span class="line"><span>    annotations:</span></span>
<span class="line"><span>      summary: &quot;交换机异常流出网络吞吐量，实例:{{ $labels.instance }}&quot;</span></span>
<span class="line"><span>      description: &quot;交换机网络流出流量 &gt; 100 MB/s，当前值为：{{ $value }}&quot;</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检查</p><p><a href="http://192.168.11.60:9090/alerts?search=" target="_blank" rel="noopener noreferrer">http://192.168.11.60:9090/alerts?search=</a></p><h2 id="_9、grafana添加dashboard" tabindex="-1"><a class="header-anchor" href="#_9、grafana添加dashboard"><span>9、grafana添加Dashboard</span></a></h2><p>id：</p><p>11169</p><p>或</p><p>1124</p><p>id为<code>11169</code>图形展示如下图：</p><figure><img src="`+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',115),r=[t];function c(h,o){return e(),n("div",null,r)}const b=s(l,[["render",c],["__file","2.17.监控华为交换机.html.vue"]]),u=JSON.parse('{"path":"/note/Prometheus/2.17.%E7%9B%91%E6%8E%A7%E5%8D%8E%E4%B8%BA%E4%BA%A4%E6%8D%A2%E6%9C%BA.html","title":"2.17.监控华为交换机","lang":"zh-CN","frontmatter":{"title":"2.17.监控华为交换机","order":20.5,"icon":"lightbulb","description":"一、环境 1、环境准备 a、docker安装prometheus 安装docker（略） 安装docker-compose(略) b、下载模拟器 思科模拟器 下载地址 华为ensp模拟器 下载地址 提取密码：0i1y c、获取mibs文件 如果不生成snmp.yaml文件，这步略过 华为官网获取mibs文件： https://support.huawe...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/vuepress/note/Prometheus/2.17.%E7%9B%91%E6%8E%A7%E5%8D%8E%E4%B8%BA%E4%BA%A4%E6%8D%A2%E6%9C%BA.html"}],["meta",{"property":"og:site_name","content":"风华"}],["meta",{"property":"og:title","content":"2.17.监控华为交换机"}],["meta",{"property":"og:description","content":"一、环境 1、环境准备 a、docker安装prometheus 安装docker（略） 安装docker-compose(略) b、下载模拟器 思科模拟器 下载地址 华为ensp模拟器 下载地址 提取密码：0i1y c、获取mibs文件 如果不生成snmp.yaml文件，这步略过 华为官网获取mibs文件： https://support.huawe..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"风华"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"2.17.监控华为交换机\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"风华\\",\\"url\\":\\"/portfolio\\"}]}"]]},"headers":[{"level":2,"title":"1、环境准备","slug":"_1、环境准备","link":"#_1、环境准备","children":[{"level":3,"title":"a、docker安装prometheus","slug":"a、docker安装prometheus","link":"#a、docker安装prometheus","children":[]},{"level":3,"title":"b、下载模拟器","slug":"b、下载模拟器","link":"#b、下载模拟器","children":[]},{"level":3,"title":"c、获取mibs文件","slug":"c、获取mibs文件","link":"#c、获取mibs文件","children":[]}]},{"level":2,"title":"1、交换机上启用和配置 SNMP 服务","slug":"_1、交换机上启用和配置-snmp-服务","link":"#_1、交换机上启用和配置-snmp-服务","children":[]},{"level":2,"title":"2、生成基础snmp.yml文件","slug":"_2、生成基础snmp-yml文件","link":"#_2、生成基础snmp-yml文件","children":[{"level":3,"title":"编译安装generator（二选一）","slug":"编译安装generator-二选一","link":"#编译安装generator-二选一","children":[]},{"level":3,"title":"docker安装generator（和编译安装二选一）","slug":"docker安装generator-和编译安装二选一","link":"#docker安装generator-和编译安装二选一","children":[]}]},{"level":2,"title":"3、生成监控cpu,内存的snmp.yml文件","slug":"_3、生成监控cpu-内存的snmp-yml文件","link":"#_3、生成监控cpu-内存的snmp-yml文件","children":[{"level":3,"title":"获取oid","slug":"获取oid","link":"#获取oid","children":[]},{"level":3,"title":"创建generator.yml文件","slug":"创建generator-yml文件","link":"#创建generator-yml文件","children":[]},{"level":3,"title":"docker运行generator","slug":"docker运行generator","link":"#docker运行generator","children":[]},{"level":3,"title":"和基础snmp.yaml合并","slug":"和基础snmp-yaml合并","link":"#和基础snmp-yaml合并","children":[]}]},{"level":2,"title":"4、二进制安装snmp_exporter（二选一）","slug":"_4、二进制安装snmp-exporter-二选一","link":"#_4、二进制安装snmp-exporter-二选一","children":[{"level":3,"title":"安装snmp_exporter","slug":"安装snmp-exporter","link":"#安装snmp-exporter","children":[]},{"level":3,"title":"创建用户","slug":"创建用户","link":"#创建用户","children":[]},{"level":3,"title":"更改exporter文件夹权限","slug":"更改exporter文件夹权限","link":"#更改exporter文件夹权限","children":[]},{"level":3,"title":"创建systemd","slug":"创建systemd","link":"#创建systemd","children":[]},{"level":3,"title":"启动","slug":"启动","link":"#启动","children":[]},{"level":3,"title":"加入到开机自启动","slug":"加入到开机自启动","link":"#加入到开机自启动","children":[]},{"level":3,"title":"检查","slug":"检查","link":"#检查","children":[]}]},{"level":2,"title":"5、docker安装snmp_exporter（二选一）","slug":"_5、docker安装snmp-exporter-二选一","link":"#_5、docker安装snmp-exporter-二选一","children":[]},{"level":2,"title":"6、添加prometheus配置","slug":"_6、添加prometheus配置","link":"#_6、添加prometheus配置","children":[{"level":3,"title":"web检查","slug":"web检查","link":"#web检查","children":[]}]},{"level":2,"title":"7、SNMP的监控指标","slug":"_7、snmp的监控指标","link":"#_7、snmp的监控指标","children":[]},{"level":2,"title":"8、配置告警规则","slug":"_8、配置告警规则","link":"#_8、配置告警规则","children":[]},{"level":2,"title":"9、grafana添加Dashboard","slug":"_9、grafana添加dashboard","link":"#_9、grafana添加dashboard","children":[]}],"git":{},"readingTime":{"minutes":21.51,"words":6453},"filePathRelative":"note/Prometheus/2.17.监控华为交换机.md","autoDesc":true}');export{b as comp,u as data};

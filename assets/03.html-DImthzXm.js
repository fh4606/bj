import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,d as n}from"./app-Bna6fuy1.js";const e="/assets/image-20230905171304741-BVXEzwJ2.png",l={},h=n(`<h3 id="_1-启动一个容器-配置环境安装supervisor服务" tabindex="-1"><a class="header-anchor" href="#_1-启动一个容器-配置环境安装supervisor服务"><span>1.启动一个容器，配置环境安装supervisor服务</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@172-0-110-100 </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]# docker run -itd --name supervisor -p 9001:9001  </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">--privileged</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">true</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> centos:7</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/sbin/init</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">f8d7e61f4a64b70eebc1878ce164f2553557cf9a53f17d3b417622d11b642aee</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@172-0-110-100 </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]# docker ps</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CONTAINER</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   IMAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      COMMAND</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       CREATED</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        PORTS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                                       NAMES</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">f8d7e61f4a64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   centos:7</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   &quot;/bin/bash&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   Up</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> second</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   0.0.0.0:9001</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">9001/tcp,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> :::9001</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">9001/tcp</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   supervisor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@172-0-110-100 </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]# docker exec -it supervisor bash</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# yum install wget -y</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# rm -rf /etc/yum.repos.d/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">*</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# wget http://mirrors.aliyun.com/repo/Centos-7.repo -O /etc/yum.repos.d/Centos-7.repo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# yum -y install epel-release</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# yum install vim -y</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# yum install supervisor -y</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## 编辑主配置文件，开放端口信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# vim /etc/supervisord.conf </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[inet_http_server]         ; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">inet</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (TCP) server disabled by default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">port</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">172.17.0.2:9001</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ; (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ip_address:port</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> specifier,</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:port</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> iface</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">username</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">              ; (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">default</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> no</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> username</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (open </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">password</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">123456</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">               ; (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">default</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> no</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> password</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (open </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)) </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[include]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">files</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/supervisord.d/</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.ini</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# mkdir -p  /etc/supervisord.d</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## 启动服务</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# supervisord -c /etc/supervisord.conf </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@f8d7e61f4a64 /]# ps -ef    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">UID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          PID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    PPID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  C</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> STIME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> TTY</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          TIME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CMD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">           1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:44</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pts/0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          15</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:44</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">         164</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       1</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:51</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/bin/python</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/bin/supervisord</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/supervisord.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">         165</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      15</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 08:51</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -ef</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-浏览器测试" tabindex="-1"><a class="header-anchor" href="#_2-浏览器测试"><span>2.浏览器测试</span></a></h2><figure><img src="`+e+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3-将supervisor服务设置开机自启" tabindex="-1"><a class="header-anchor" href="#_3-将supervisor服务设置开机自启"><span>3.将supervisor服务设置开机自启</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@47803e5e6be4 /]# systemctl enable supervisord</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_4-将配置好的容器导出为镜像-后续操作基于该镜像" tabindex="-1"><a class="header-anchor" href="#_4-将配置好的容器导出为镜像-后续操作基于该镜像"><span>4.将配置好的容器导出为镜像，后续操作基于该镜像</span></a></h2><blockquote><p>配置好vim、ip addr、wget以及yum源等，根据自己的习惯操作来</p></blockquote><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[root@172-0-110-100 </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]# docker commit supervisor supervisor:1.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>',9),t=[h];function k(p,r){return a(),i("div",null,t)}const o=s(l,[["render",k],["__file","03.html.vue"]]),y=JSON.parse('{"path":"/note/supervisord/03.html","title":"03-使用yum安装","lang":"zh-CN","frontmatter":{"title":"03-使用yum安装","order":3,"icon":"lightbulb","description":"1.启动一个容器，配置环境安装supervisor服务 2.浏览器测试 3.将supervisor服务设置开机自启 4.将配置好的容器导出为镜像，后续操作基于该镜像 配置好vim、ip addr、wget以及yum源等，根据自己的习惯操作来","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/note/supervisord/03.html"}],["meta",{"property":"og:site_name","content":"风华"}],["meta",{"property":"og:title","content":"03-使用yum安装"}],["meta",{"property":"og:description","content":"1.启动一个容器，配置环境安装supervisor服务 2.浏览器测试 3.将supervisor服务设置开机自启 4.将配置好的容器导出为镜像，后续操作基于该镜像 配置好vim、ip addr、wget以及yum源等，根据自己的习惯操作来"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"风华"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"03-使用yum安装\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"风华\\",\\"url\\":\\"/portfolio\\"}]}"]]},"headers":[{"level":3,"title":"1.启动一个容器，配置环境安装supervisor服务","slug":"_1-启动一个容器-配置环境安装supervisor服务","link":"#_1-启动一个容器-配置环境安装supervisor服务","children":[]},{"level":2,"title":"2.浏览器测试","slug":"_2-浏览器测试","link":"#_2-浏览器测试","children":[]},{"level":2,"title":"3.将supervisor服务设置开机自启","slug":"_3-将supervisor服务设置开机自启","link":"#_3-将supervisor服务设置开机自启","children":[]},{"level":2,"title":"4.将配置好的容器导出为镜像，后续操作基于该镜像","slug":"_4-将配置好的容器导出为镜像-后续操作基于该镜像","link":"#_4-将配置好的容器导出为镜像-后续操作基于该镜像","children":[]}],"git":{},"readingTime":{"minutes":1.1,"words":330},"filePathRelative":"note/supervisord/03.md","autoDesc":true}');export{o as comp,y as data};

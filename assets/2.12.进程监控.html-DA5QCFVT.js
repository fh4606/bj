import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,o as n,d as a}from"./app-BvlpFik8.js";const i="/assets/20240620184012-DTeiqBh9.png",l="/assets/2023-10-28_202347_5062720.0606206016631462-Cx2aiT41.png",p="/assets/2023-10-28_202347_5704670.3349368472544043-CniY6SDl.png",d="/assets/2023-10-28_202232_3157980.3417943973584434-fzbfidHN.png",t={},r=a(`<h1 id="一、环境" tabindex="-1"><a class="header-anchor" href="#一、环境"><span>一、环境</span></a></h1><table id="1c302614" class="ne-table" style="table-layout:fixed;border-collapse:collapse;border:1px solid #d9d9d9;width:748px;"><tbody><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="u04b9a31b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">主机名</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ud31bfdb2" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">IP地址</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ua5259c3e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">系统</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u2d64edef" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">说明</span></p></td></tr><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="u05edd313" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">localhost</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ue7acb501" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">192.168.11.61</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u1e082543" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">Ubuntu 20.04</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="uda05fe41" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">docker安装的prometheus</span></p></td></tr><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="ua33be51d" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">test</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u6ca1ebbe" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">192.168.11.62</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ue50f2aac" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">Ubuntu 20.04</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="uf3d01df4" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">安装process-exporter对这台服务器的进程监控</span></p></td></tr></tbody></table><h2 id="_1、环境搭建" tabindex="-1"><a class="header-anchor" href="#_1、环境搭建"><span>1、环境搭建</span></a></h2><h3 id="docker安装" tabindex="-1"><a class="header-anchor" href="#docker安装"><span>docker安装</span></a></h3><p>略</p><h3 id="docker-compose安装" tabindex="-1"><a class="header-anchor" href="#docker-compose安装"><span>docker-compose安装</span></a></h3><p>略</p><h1 id="二、进程监控" tabindex="-1"><a class="header-anchor" href="#二、进程监控"><span>二、进程监控</span></a></h1><h3 id="_1、process-exporter功能" tabindex="-1"><a class="header-anchor" href="#_1、process-exporter功能"><span>1、process exporter功能</span></a></h3><p>如果想要对主机的进程进行监控，例如chronyd，sshd等服务进程以及自定义脚本程序运行状态监控。我们使用node exporter就不能实现需求了，此时就需要使用process exporter来做进程状态的监控。</p><p>项目地址：<a href="https://github.com/ncabatoff/process-exporter" target="_blank" rel="noopener noreferrer">https://github.com/ncabatoff/process-exporter</a></p><h2 id="_2、二进制安装-二选一" tabindex="-1"><a class="header-anchor" href="#_2、二进制安装-二选一"><span>2、二进制安装（二选一）</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>wget https://github.com/ncabatoff/process-exporter/releases/download/v0.7.10/process-exporter-0.7.10.linux-amd64.tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>tar zxvf process-exporter-0.7.10.linux-amd64.tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mkdir /opt/prometheus -p</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>mv process-exporter-0.7.10.linux-amd64 /opt/prometheus/process_exporter</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ls -l /opt/prometheus/process_exporter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建用户" tabindex="-1"><a class="header-anchor" href="#创建用户"><span>创建用户</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>useradd -M -s /usr/sbin/nologin prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="更改exporter文件夹权限" tabindex="-1"><a class="header-anchor" href="#更改exporter文件夹权限"><span>更改exporter文件夹权限</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>chown prometheus:prometheus -R /opt/prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="创建配置文件" tabindex="-1"><a class="header-anchor" href="#创建配置文件"><span>创建配置文件</span></a></h3><p>监控所有进程</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt;&gt;/opt/prometheus/process_exporter/process.yml&lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>process_names:</span></span>
<span class="line"><span>  - name: &quot;{{.Comm}}&quot;  # 匹配模板</span></span>
<span class="line"><span>    cmdline:</span></span>
<span class="line"><span>    - &#39;.+&#39;   # 匹配名称</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建systemd" tabindex="-1"><a class="header-anchor" href="#创建systemd"><span>创建systemd</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &lt;&lt;&quot;EOF&quot; &gt;/etc/systemd/system/process_exporter.service</span></span>
<span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=process_exporter</span></span>
<span class="line"><span>After=network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=simple</span></span>
<span class="line"><span>User=prometheus</span></span>
<span class="line"><span>Group=prometheus</span></span>
<span class="line"><span>ExecStart=/opt/prometheus/process_exporter/process-exporter -config.path=/opt/prometheus/process_exporter/process.yml</span></span>
<span class="line"><span>Restart=on-failure</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl daemon-reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl start process_exporter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="加入到开机自启动" tabindex="-1"><a class="header-anchor" href="#加入到开机自启动"><span>加入到开机自启动</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl enable process_exporter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="检查" tabindex="-1"><a class="header-anchor" href="#检查"><span>检查</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>systemctl status process_exporter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动不了检查日志</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>journalctl -u process_exporter  -f</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2、docker安装" tabindex="-1"><a class="header-anchor" href="#_2、docker安装"><span>2、docker安装</span></a></h2><p>创建数据目录</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /data/process_exporter -p</span></span>
<span class="line"><span>cd /data/process_exporter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>创建配置文件</p><p>Process-Exporter 的做法是配置需要监控的进程的名称，他会去搜索该进程从而得到其需要的监控信息，其实也就是我们常做的 ps -efl | grep xxx 命令来查看对应的进程。</p><ul><li>监控所有进程</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt;&gt;process.yml &lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>process_names:</span></span>
<span class="line"><span>  - name: &quot;{{.Comm}}&quot; # 匹配模板</span></span>
<span class="line"><span>    cmdline:</span></span>
<span class="line"><span>    - &#39;.+&#39;   # 匹配所有名称</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>监控指定进程</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>process_names:</span></span>
<span class="line"><span>#  - name: &quot;{{.Comm}}&quot;</span></span>
<span class="line"><span>#    cmdline:</span></span>
<span class="line"><span>#    - &#39;.+&#39;</span></span>
<span class="line"><span>  - name: &quot;{{.Matches}}&quot;</span></span>
<span class="line"><span>    cmdline:</span></span>
<span class="line"><span>    - &#39;nginx&#39; #唯一标识</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  - name: &quot;{{.Matches}}&quot;</span></span>
<span class="line"><span>    cmdline:</span></span>
<span class="line"><span>    - &#39;mongod&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  - name: &quot;{{.Matches}}&quot;</span></span>
<span class="line"><span>    cmdline:</span></span>
<span class="line"><span>    - &#39;mysqld&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  - name: &quot;{{.Matches}}&quot;</span></span>
<span class="line"><span>    cmdline:</span></span>
<span class="line"><span>    - &#39;redis-server&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker运行</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>docker run -d --rm -p 9256:9256 --privileged -v /proc:/host/proc -v \`pwd\`:/config --name process-exporter ncabatoff/process-exporter --procfs /host/proc -config.path /config/process.yml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>检查</p><p><a href="http://192.168.11.62:9256/metrics" target="_blank" rel="noopener noreferrer">http://192.168.11.62:9256/metrics</a></p><h2 id="配置说明" tabindex="-1"><a class="header-anchor" href="#配置说明"><span>配置说明</span></a></h2><ul><li><p>匹配模板</p><figure><img src="`+i+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ul><h2 id="_3、prometheus设置" tabindex="-1"><a class="header-anchor" href="#_3、prometheus设置"><span>3、Prometheus设置</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cd /data/docker-prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>使用cat追加</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt;&gt; prometheus/prometheus.yml &lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>  - job_name: &#39;process&#39;</span></span>
<span class="line"><span>    scrape_interval: 30s</span></span>
<span class="line"><span>    scrape_timeout: 15s</span></span>
<span class="line"><span>    static_configs:</span></span>
<span class="line"><span>    - targets: [&#39;192.168.11.62:9256&#39;]</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新加载配置" tabindex="-1"><a class="header-anchor" href="#重新加载配置"><span>重新加载配置</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl -X POST http://localhost:9090/-/reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="检查-1" tabindex="-1"><a class="header-anchor" href="#检查-1"><span>检查</span></a></h3><p><a href="http://192.168.11.61:9090/targets?search=" target="_blank" rel="noopener noreferrer">http://192.168.11.61:9090/targets?search=</a></p><h2 id="_4、metrics说明" tabindex="-1"><a class="header-anchor" href="#_4、metrics说明"><span>4、metrics说明</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>namedprocess_</span></span>
<span class="line"><span></span></span>
<span class="line"><span>namedprocess_namegroup_states{state=&quot;Zombie&quot;} 查看僵尸</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 上下文切换数量</span></span>
<span class="line"><span># Counter</span></span>
<span class="line"><span>namedprocess_namegroup_context_switches_total</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># CPU user/system 时间（秒）</span></span>
<span class="line"><span># Counter</span></span>
<span class="line"><span>namedprocess_namegroup_cpu_seconds_total</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 主要页缺失次数</span></span>
<span class="line"><span># Counter</span></span>
<span class="line"><span>namedprocess_namegroup_major_page_faults_total</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 次要页缺失次数</span></span>
<span class="line"><span># Counter</span></span>
<span class="line"><span>namedprocess_namegroup_minor_page_faults_total</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 内存占用（byte）</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_memory_bytes</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 同名进程数量</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_num_procs</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 同名进程状态分布</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_states</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 线程数量</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_num_threads</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 启动时间戳</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_oldest_start_time_seconds</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 打开文件描述符数量</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_open_filedesc</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 打开文件数 / 允许打开文件数</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_worst_fd_ratio</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 读数据量（byte）</span></span>
<span class="line"><span># Counter</span></span>
<span class="line"><span>namedprocess_namegroup_read_bytes_total</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 写数据量（byte）</span></span>
<span class="line"><span># Counter</span></span>
<span class="line"><span>namedprocess_namegroup_write_bytes_total</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 内核wchan等待线程数量</span></span>
<span class="line"><span># Gauge</span></span>
<span class="line"><span>namedprocess_namegroup_threads_wchan</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="常用指标" tabindex="-1"><a class="header-anchor" href="#常用指标"><span>常用指标</span></a></h3><table id="be96ce53" class="ne-table" style="table-layout:fixed;border-collapse:collapse;border:1px solid #d9d9d9;width:750px;"><tbody><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="ubc45d752" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">指标名</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="ub4017ac4" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">解释</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="ua167c118" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_num_procs</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u01d0b35f" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">运行的进程数</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u8300293b" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_states</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u89bdb085" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">Running/Sleeping/Other/Zombie状态的进程数</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u7529bc84" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_cpu_seconds_total</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u7268e602" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">获取/proc/[pid]/stat 进程CPU utime、stime状态时间</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="ufee34df1" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_read_bytes_total</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u312fccf7" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">获取/proc/[pid]/io 进程读取字节数</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u1f82d33a" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_write_bytes_total</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u0e29d203" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">获取/proc/[pid]/io 进程写入字节数</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u07495a90" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_memory_bytes</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u05d74c5d" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">获取进程使用的内存字节数</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u657428ee" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_open_filedesc</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u048f4a46" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">获取进程使用的文件描述符数量</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u26494645" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_thread_count</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u12797209" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">运行的线程数</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u2d3cf1a1" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_thread_cpu_seconds_total</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u84d247aa" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">获取线程CPU状态时间</span></p></td></tr><tr style="height:33px;"><td width="375" style="border:1px solid #d9d9d9;"><p id="u592328c4" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_thread_io_bytes_total</span></p></td><td width="375" style="border:1px solid #d9d9d9;"><p id="u2fe7f004" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">获取线程IO字节数</span></p></td></tr></tbody></table><h2 id="_5、触发器" tabindex="-1"><a class="header-anchor" href="#_5、触发器"><span>5、触发器</span></a></h2><p>Prometheus配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 报警(触发器)配置</span></span>
<span class="line"><span>rule_files:</span></span>
<span class="line"><span>  - &quot;alert.yml&quot;  </span></span>
<span class="line"><span>  - &quot;rules/*.yml&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加触发器-告警规则" tabindex="-1"><a class="header-anchor" href="#添加触发器-告警规则"><span>添加触发器（告警规则）</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cat &gt; prometheus/rules/process.yml &lt;&lt;&quot;EOF&quot;</span></span>
<span class="line"><span>groups:</span></span>
<span class="line"><span>- name: process</span></span>
<span class="line"><span>  rules:</span></span>
<span class="line"><span>  - alert: 进程数多告警</span></span>
<span class="line"><span>    expr: sum(namedprocess_namegroup_states) by (instance) &gt; 1000</span></span>
<span class="line"><span>    for: 1m</span></span>
<span class="line"><span>    labels:</span></span>
<span class="line"><span>      severity: warning</span></span>
<span class="line"><span>    annotations:</span></span>
<span class="line"><span>      summary: &quot;进程数超过1000&quot;</span></span>
<span class="line"><span>      description: &quot;服务器当前有{{ $value }}个进程&quot;</span></span>
<span class="line"><span>  - alert: 僵尸进程数告警</span></span>
<span class="line"><span>    expr: sum by(instance, groupname) (namedprocess_namegroup_states{state=&quot;Zombie&quot;}) &gt; 0</span></span>
<span class="line"><span>    for: 1m</span></span>
<span class="line"><span>    labels:</span></span>
<span class="line"><span>      severity: warning</span></span>
<span class="line"><span>    annotations:</span></span>
<span class="line"><span>      summary: &quot;有僵尸进程数&quot;</span></span>
<span class="line"><span>      description: &quot;进程{{ $labels.groupname }}有{{ $value }}个僵尸进程&quot;</span></span>
<span class="line"><span>  - alert: 进程重启告警</span></span>
<span class="line"><span>    expr: ceil(time() - max by(instance, groupname) (namedprocess_namegroup_oldest_start_time_seconds)) &lt; 60</span></span>
<span class="line"><span>    for: 15s</span></span>
<span class="line"><span>    labels:</span></span>
<span class="line"><span>      severity: warning</span></span>
<span class="line"><span>    annotations:</span></span>
<span class="line"><span>      summary: &quot;进程重启&quot;</span></span>
<span class="line"><span>      description: &quot;进程{{ $labels.groupname }}在{{ $value }}秒前重启过&quot;</span></span>
<span class="line"><span>  - alert: 进程退出告警</span></span>
<span class="line"><span>    expr: max by(instance, groupname) (delta(namedprocess_namegroup_oldest_start_time_seconds{groupname=~&quot;^java.*|^nginx.*&quot;}[1d])) &lt; 0</span></span>
<span class="line"><span>    for: 1m</span></span>
<span class="line"><span>    labels:</span></span>
<span class="line"><span>      severity: warning</span></span>
<span class="line"><span>    annotations:</span></span>
<span class="line"><span>      summary: &quot;进程退出&quot;</span></span>
<span class="line"><span>      description: &quot;进程{{ $labels.groupname }}退出了&quot;</span></span>
<span class="line"><span>EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新加载配置-1" tabindex="-1"><a class="header-anchor" href="#重新加载配置-1"><span>重新加载配置</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl -X POST http://localhost:9090/-/reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="检查-2" tabindex="-1"><a class="header-anchor" href="#检查-2"><span>检查</span></a></h3><p><a href="http://192.168.11.61:9090/alerts?search=" target="_blank" rel="noopener noreferrer">http://192.168.11.61:9090/alerts?search=</a></p><h2 id="_6、doshboard" tabindex="-1"><a class="header-anchor" href="#_6、doshboard"><span>6、Doshboard</span></a></h2><p><a href="https://grafana.com/grafana/dashboards/8378-system-processes-metrics/" target="_blank" rel="noopener noreferrer">https://grafana.com/grafana/dashboards/8378-system-processes-metrics/</a></p><h3 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h3><p>下面2个图形显示不正常</p><figure><img src="`+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>process-exporter 升级到 0.5.0后 ,`namedprocess_namegroup_cpu_user_seconds_total`和`namedprocess_namegroup_cpu_system_seconds_total`合为一个指标名`namedprocess_namegroup_cpu_seconds_total` </span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>`namedprocess_namegroup_cpu_user_seconds_tota`l变成`namedprocess_namegroup_cpu_seconds_total{mode=&quot;system&quot;}`</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>  `namedprocess_namegroup_cpu_system_seconds_total`变成`namedprocess_namegroup_cpu_seconds_total{mode=&quot;user&quot;}`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table id="1c0e4917" class="ne-table" style="table-layout:fixed;border-collapse:collapse;border:1px solid #d9d9d9;width:748px;"><tbody><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="u3404814e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">指标</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ue827bba6" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">监控项含义</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u3d166c7d" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">单位</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ub3e0ec20" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">说明</span></p></td></tr><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="ufe1f1268" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_cpu_seconds_total{mode=&quot;system&quot;}</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u6afb92e6" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">当前内核空间占用CPU百分比。</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ue81f2871" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">%</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u93752d8d" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">系统上下文切换的消耗。如果该监控项数值比较高，则说明服务器开了太多的进程或线程。</span></p></td></tr><tr style="height:33px;"><td width="187" style="border:1px solid #d9d9d9;"><p id="uf6fffe5e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">namedprocess_namegroup_cpu_seconds_total{mode=&quot;user&quot;}</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="u6dc56596" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">当前用户空间占用CPU百分比。</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="ub6a0eece" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">%</span></p></td><td width="187" style="border:1px solid #d9d9d9;"><p id="uaaf65d30" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text">用户进程对CPU的消耗。</span></p></td></tr></tbody></table><h3 id="解决" tabindex="-1"><a class="header-anchor" href="#解决"><span>解决</span></a></h3><p>Top processes by System CPU cores used图形修改如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>topk(5,</span></span>\n<span class="line"><span>rate(namedprocess_namegroup_cpu_seconds_total{mode=&quot;system&quot;,groupname=~&quot;$processes&quot;,instance=~&quot;$host&quot;}[$interval])</span></span>\n<span class="line"><span>or </span></span>\n<span class="line"><span>(</span></span>\n<span class="line"><span>irate(namedprocess_namegroup_cpu_seconds_total{mode=&quot;system&quot;,groupname=~&quot;$processes&quot;,instance=~&quot;$host&quot;}[5m])))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Top processes by Total CPU cores used图形修改如下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>topk(5,sum by (groupname,instance) (rate(namedprocess_namegroup_cpu_seconds_total{groupname=~&quot;$processes&quot;,instance=~&quot;$host&quot;}[$interval]))</span></span>\n<span class="line"><span>or</span></span>\n<span class="line"><span>sum by (groupname,instance) (irate(namedprocess_namegroup_cpu_seconds_total{groupname=~&quot;$processes&quot;,instance=~&quot;$host&quot;}[5m])))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或图形改名为<code>Top processes by User CPU cores used</code> 用户进程cpu使用率排名</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>topk(5,</span></span>\n<span class="line"><span>rate(namedprocess_namegroup_cpu_seconds_total{mode=&quot;user&quot;,groupname=~&quot;$processes&quot;,instance=~&quot;$host&quot;}[$interval])</span></span>\n<span class="line"><span>or </span></span>\n<span class="line"><span>(</span></span>\n<span class="line"><span>irate(namedprocess_namegroup_cpu_seconds_total{mode=&quot;user&quot;,groupname=~&quot;$processes&quot;,instance=~&quot;$host&quot;}[5m])))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改完成后，图行正常</p><figure><img src="'+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="三、我的微信" tabindex="-1"><a class="header-anchor" href="#三、我的微信"><span>三、我的微信</span></a></h1><p>如果碰到问题，可以随时加我微信，谢谢</p><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',85),c=[r];function o(h,u){return n(),e("div",null,c)}const v=s(t,[["render",o],["__file","2.12.进程监控.html.vue"]]),g=JSON.parse('{"path":"/note/Prometheus/2.12.%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7.html","title":"2.12.进程监控","lang":"zh-CN","frontmatter":{"title":"2.12.进程监控","order":17,"icon":"lightbulb","description":"一、环境 1、环境搭建 docker安装 略 docker-compose安装 略 二、进程监控 1、process exporter功能 如果想要对主机的进程进行监控，例如chronyd，sshd等服务进程以及自定义脚本程序运行状态监控。我们使用node exporter就不能实现需求了，此时就需要使用process exporter来做进程状态的监...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/note/Prometheus/2.12.%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7.html"}],["meta",{"property":"og:site_name","content":"风华"}],["meta",{"property":"og:title","content":"2.12.进程监控"}],["meta",{"property":"og:description","content":"一、环境 1、环境搭建 docker安装 略 docker-compose安装 略 二、进程监控 1、process exporter功能 如果想要对主机的进程进行监控，例如chronyd，sshd等服务进程以及自定义脚本程序运行状态监控。我们使用node exporter就不能实现需求了，此时就需要使用process exporter来做进程状态的监..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"风华"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"2.12.进程监控\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"风华\\",\\"url\\":\\"/portfolio\\"}]}"]]},"headers":[{"level":2,"title":"1、环境搭建","slug":"_1、环境搭建","link":"#_1、环境搭建","children":[{"level":3,"title":"docker安装","slug":"docker安装","link":"#docker安装","children":[]},{"level":3,"title":"docker-compose安装","slug":"docker-compose安装","link":"#docker-compose安装","children":[]},{"level":3,"title":"1、process exporter功能","slug":"_1、process-exporter功能","link":"#_1、process-exporter功能","children":[]}]},{"level":2,"title":"2、二进制安装（二选一）","slug":"_2、二进制安装-二选一","link":"#_2、二进制安装-二选一","children":[{"level":3,"title":"创建用户","slug":"创建用户","link":"#创建用户","children":[]},{"level":3,"title":"更改exporter文件夹权限","slug":"更改exporter文件夹权限","link":"#更改exporter文件夹权限","children":[]},{"level":3,"title":"创建配置文件","slug":"创建配置文件","link":"#创建配置文件","children":[]},{"level":3,"title":"创建systemd","slug":"创建systemd","link":"#创建systemd","children":[]},{"level":3,"title":"启动","slug":"启动","link":"#启动","children":[]},{"level":3,"title":"加入到开机自启动","slug":"加入到开机自启动","link":"#加入到开机自启动","children":[]},{"level":3,"title":"检查","slug":"检查","link":"#检查","children":[]}]},{"level":2,"title":"2、docker安装","slug":"_2、docker安装","link":"#_2、docker安装","children":[]},{"level":2,"title":"配置说明","slug":"配置说明","link":"#配置说明","children":[]},{"level":2,"title":"3、Prometheus设置","slug":"_3、prometheus设置","link":"#_3、prometheus设置","children":[{"level":3,"title":"重新加载配置","slug":"重新加载配置","link":"#重新加载配置","children":[]},{"level":3,"title":"检查","slug":"检查-1","link":"#检查-1","children":[]}]},{"level":2,"title":"4、metrics说明","slug":"_4、metrics说明","link":"#_4、metrics说明","children":[{"level":3,"title":"常用指标","slug":"常用指标","link":"#常用指标","children":[]}]},{"level":2,"title":"5、触发器","slug":"_5、触发器","link":"#_5、触发器","children":[{"level":3,"title":"添加触发器（告警规则）","slug":"添加触发器-告警规则","link":"#添加触发器-告警规则","children":[]},{"level":3,"title":"重新加载配置","slug":"重新加载配置-1","link":"#重新加载配置-1","children":[]},{"level":3,"title":"检查","slug":"检查-2","link":"#检查-2","children":[]}]},{"level":2,"title":"6、Doshboard","slug":"_6、doshboard","link":"#_6、doshboard","children":[{"level":3,"title":"问题","slug":"问题","link":"#问题","children":[]},{"level":3,"title":"解决","slug":"解决","link":"#解决","children":[]}]}],"git":{},"readingTime":{"minutes":9.3,"words":2789},"filePathRelative":"note/Prometheus/2.12.进程监控.md","autoDesc":true}');export{v as comp,g as data};
